pipeline {
    agent any
    tools {
        maven "maven3.8.6"
    }
    stages {
        stage('1cloning') {
            steps {
                sh "echo 'Apps latest version committed'"
                git "https://github.com/eghas-godwin/maven-web-application.git"
            }
        }
        stage('2Test&build') {
            steps {
                sh "mvn clean install"
            }
        }
        stage('3CodeQuality') {
            steps {
                sh "mvn sonar:sonar"
            }
        }
        stage('4UploadtoNexus') {
            steps {
                sh "mvn deploy"
            }
        }
        stage('5DeploytoTomcat') {
            steps {
                sh "echo 'Ready for deployment'"
                //use pipeline Syntax generator for below command
                deploy adapters: [tomcat9(credentialsId: 'tomcatcredentials', path: '', url: 'http://54.243.23.121:8181/')], contextPath: null, onFailure: false, war: 'target/*war'
            }
    }

}
}
